# SIPSTACK Connector Configuration
# Copy this file to .env and fill in your values

# ====================
# REQUIRED SETTINGS
# ====================

# SIPSTACK API Configuration
# Standard key format: sk_{32 random characters}
# Example: sk_1234567890abcdef1234567890abcdef
API_KEY=your_api_key_here

# Asterisk AMI Configuration
AMI_HOST=localhost
AMI_PORT=5038
AMI_USERNAME=manager-sipstack
AMI_PASSWORD=your_secure_password

# ====================
# OPTIMAL SETTINGS (Recommended defaults)
# ====================

# API Region (ca1, us1, us2)
REGION=us1

# User/Group ID for file permissions
# Set to match your asterisk user (run 'id asterisk' to get values)
PUID=1000
PGID=1000

# CDR Processing - Optimal for production
CDR_ENABLED=true
CDR_MODE=batch
CDR_BATCH_SIZE=200
CDR_BATCH_TIMEOUT=30
CDR_QUEUE_SIZE=10000

# Recording Upload - Optimal for fast processing
RECORDING_CHECK_INTERVAL_SECONDS=20
RECORDING_UPLOAD_RETRY_MINUTES=5
RECORDING_WATCH_PATHS=/var/spool/asterisk/monitor

# Logging - INFO for production, DEBUG for troubleshooting
LOG_LEVEL=INFO

# ====================
# ADVANCED SETTINGS (Only change if needed)
# ====================

# CDR Filtering - Keep disabled for maximum analytics
CDR_FILTER_ENABLED=false
CDR_FILTER_EXCLUDE_DST=h

# Tenant Detection
# Comma-separated list of trunk names to filter out when detecting tenant names
# Example: KNOWN_TRUNKS=sbc-ca2,trunk-provider,pstn-gateway
KNOWN_TRUNKS=

# DID to tenant mappings (format: DID:tenant,DID:tenant)
# Example: DID_TENANT_MAP=14164775498:gconnect,18665137797:telair,16478743709:cpapliving
DID_TENANT_MAP=

# AccountCode to tenant mappings (format: code:tenant,code:tenant)
# Example: ACCOUNTCODE_TENANT_MAP=GC:gconnect,TL:telair,CP:cpapliving
ACCOUNTCODE_TENANT_MAP=

# Optional: Path to JSON config file with more detailed mappings
# DID_TENANT_CONFIG=/etc/asterisk-connector/tenant_mapping.json

# Performance Tuning
CDR_BATCH_FORCE_TIMEOUT=5
CDR_MAX_RETRIES=3
CDR_MAX_CONCURRENT=10
API_TIMEOUT=30

# Monitoring (Prometheus metrics)
MONITORING_ENABLED=false
MONITORING_PORT=8000
