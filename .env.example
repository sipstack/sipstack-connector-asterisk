# SIPSTACK Connector Configuration
# Copy this file to .env and fill in your values

# Required: SIPSTACK API Configuration
# Smart key format: sk_t{tier}_{encrypted_customer_id}_{token}
# Example: sk_t2_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
API_KEY=your_api_key_here
# Region options: ca1, us1, us2
REGION=us1

# Required: Asterisk AMI Configuration
# Use localhost with --network host
AMI_HOST=localhost
AMI_PORT=5038
# Must match section name in manager.conf
AMI_USERNAME=manager-sipstack
AMI_PASSWORD=your_secure_password

# Optional: CDR Processing
# Enable/disable CDR (Call Detail Record) processing
CDR_ENABLED=true
# Mode: 'batch' (default) or 'direct' (immediate sending)
CDR_MODE=batch
# Number of CDRs to batch before sending (batch mode)
CDR_BATCH_SIZE=100
# Seconds to wait before sending partial batch (batch mode)
CDR_BATCH_TIMEOUT=30
# Force flush interval in seconds - prevents indefinite blocking (batch mode)
CDR_BATCH_FORCE_TIMEOUT=5
# Maximum CDRs to queue (drops oldest if full)
CDR_QUEUE_SIZE=10000
# Maximum retry attempts for failed batches
CDR_MAX_RETRIES=3
# Maximum concurrent API requests (direct mode)
CDR_MAX_CONCURRENT=10

# Optional: CDR Filtering (reduces storage by ~80-90%)
# Enable CDR filtering to reduce noise and storage
CDR_FILTER_ENABLED=false
# Filter out queue distribution attempts (dst='s' with NO ANSWER)
CDR_FILTER_QUEUE_ATTEMPTS=true
# Filter out zero duration calls (except BUSY/FAILED)
CDR_FILTER_ZERO_DURATION=true
# Filter to only internal calls (both src and dst are extensions)
CDR_FILTER_INTERNAL_ONLY=false
# Minimum call duration in seconds (0 = disabled)
CDR_FILTER_MIN_DURATION=0
# Comma-separated list of destinations to exclude (default: s,h)
CDR_FILTER_EXCLUDE_DST=s,h

# Optional: Performance Tuning
LOG_LEVEL=INFO
# API request timeout in seconds
API_TIMEOUT=30

# Optional: Monitoring
MONITORING_ENABLED=false
MONITORING_PORT=8000
